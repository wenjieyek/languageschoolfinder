<% @page_title="Index" %>

<script type="text/javascript">
document.addEventListener("turbolinks:load", function() {
	$(document).ready(function() {
	$('input.autocomplete').autocomplete({
    data: {
      <% @areas.each do |area| %>
      "<%=area.areaname %>, <%=area.state.state %>": null,
	  <% end %>
    },
    limit: 20, // The max amount of results that can be shown at once. Default: Infinity.
    onAutocomplete: function(val) {
      // Callback function when value is autcompleted.
    },
    minLength: 1, // The minimum length of the input for the autocomplete to start. Default: 1.
  });
	  });
	 });
</script>



</div>



<div class="parallax-container" style="height:400px;">
    <div class="parallax"><%=image_tag("1") %></div>
    <div class="container">
        <br>
        <br>
        
        <div class="card center-align white " >
        <span class="card-title">Search Your Language School</span>
        <div class="card-content">
        <%=form_tag(public_result_path,:method=>:get, :class=>"col s12") do %>
        <div class="row">
        <div class="input-field col s12 m6">
        <%=label_tag ("Area ")%>
        <%=text_field_tag(:city,"",:id=>'autocomplete-input',:class=>'autocomplete') %>
        </div>
        <div class="input-field col s12 m6">
        <%=select_tag(:languagetype,options_from_collection_for_select(Language.all, :language, :language)) %>
        <%=label_tag("Language")%>             
        </div>
        </div>
        <%=submit_tag("Search!",:class=>"waves-effect waves-light btn teal lighten-2",:onclick=>"filterarea()") %>
        <% end %>
        </div>
        </div><!-- card center-align white -->  
   
    </div>
  </div>
  
    
 

   
<div class="container">


<br>
  <div class="row">
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s3"><a href="#views">Most Views</a></li>
        <li class="tab col s3"><a href="#ratings">Most Ratings</a></li>
        <li class="tab col s3"><a href="#bookmark">Most Bootmarks</a></li>
        <li class="tab col s3"><a href="#new">New Schools</a></li>
       
      </ul>
    </div>


    <div id="views" class="col s12">
<% @most_views_schools.each do |new_school| %>

    <div class="col s12 m3">
          <div class="card hoverable center">
            <div class="card-image">
              <%=image_tag("#{new_school.profilepicture}") %>
              
            </div>
            <div class="card-content">
              <span class="card-title"><%=new_school.name %></span>
              <div class='chip'><i class='material-icons teal-text text-lighten-2 left'>star_rate</i><%=number_with_precision(@ratings=Rating.where(:school_user_id=>new_school.id).average(:marks), :precision => 2)%>
              </div>
              <p><%=new_school.city %>, <%=new_school.city %></p>
            </div>
            <div class="card-action">
              <%=link_to "View",public_path(new_school.id) %>
            </div>
          </div>
    </div>
  

    <% end %>

    </div>

    <div id="ratings" class="col s12">
    <% @most_ratings_schools.each do |new_school| %>

    <div class="col s12 m3">
          <div class="card hoverable center">
            <div class="card-image">
              <%=image_tag("#{new_school.profilepicture}") %>
              
            </div>
            <div class="card-content">
              <span class="card-title"><%=new_school.name %></span>
              <div class='chip'><i class='material-icons teal-text text-lighten-2 left'>star_rate</i><%=number_with_precision(@ratings=Rating.where(:school_user_id=>new_school.id).average(:marks), :precision => 2)%>
              </div>
              <p><%=new_school.city %>, <%=new_school.city %></p>
            </div>
            <div class="card-action">
              <%=link_to "View",public_path(new_school.id) %>
            </div>
          </div>
    </div>
  

    <% end %>

    </div>

    <div id="bookmark" class="col s12">
    <% @most_bookmarks_schools.each do |new_school| %>

    <div class="col s12 m3">
          <div class="card hoverable center">
            <div class="card-image">
              <%=image_tag("#{new_school.profilepicture}") %>
              
            </div>
            <div class="card-content">
              <span class="card-title"><%=new_school.name %></span>
              <div class='chip'><i class='material-icons teal-text text-lighten-2 left'>star_rate</i><%=number_with_precision(@ratings=Rating.where(:school_user_id=>new_school.id).average(:marks), :precision => 2)%>
              </div>
              <p><%=new_school.city %>, <%=new_school.city %></p>
            </div>
            <div class="card-action">
              <%=link_to "View",public_path(new_school.id) %>
            </div>
          </div>
    </div>
  

    <% end %>
    </div>

    <div id="new" class="col s12">
    <% @new_schools.each do |new_school| %>

    <div class="col s12 m3">
          <div class="card hoverable center">
            <div class="card-image">
              <%=image_tag("#{new_school.profilepicture}") %>
              
            </div>
            <div class="card-content">
              <span class="card-title"><%=new_school.name %></span>
              <div class='chip'><i class='material-icons teal-text text-lighten-2 left'>star_rate</i><%=number_with_precision(@ratings=Rating.where(:school_user_id=>new_school.id).average(:marks), :precision => 1)%>
              </div>
              <p><%=new_school.city %>, <%=new_school.city %></p>
            </div>
            <div class="card-action">
              <%=link_to "View",public_path(new_school.id) %>
            </div>
          </div>
    </div>
  

    <% end %>
    </div>
    


  </div>


    
        
  
</div>





<div class="parallax-container" style="height:300px;">
<div class="container">
   <div class="center" >

  
   <br>
   <br>
   <br>
    <div class="parallax"><%=image_tag("1") %></div>
    <h4 style="color:white;">School? Join Us Now</h4>

     

      <%=link_to('<i class="material-icons left">comment</i> Register'.html_safe,new_school_user_path,:class=>"waves-effect waves-light btn-large") %>
  </div>
  </div>
  </div>






